<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test barcode reader</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<script src="html5-qrcode.min.js"></script>
</head>
<body>

<div id="reader" width="600px"></div>

<p id="logs">
	<b>LOGS</b>
</p>





<script type="text/javascript">
	let lastWasError = false;
	let logs = document.getElementById('logs');

    function onScanSuccess(qrMessage) {
        // handle the scanned code as you like
        // alert(`QR matched = ${qrMessage}`);
        lastWasError = false;
		logs.innerHTML += "<br>"+qrMessage;
    }

    function onScanFailure(error) {
        // handle scan failure, usually better to ignore and keep scanning
        //alert(`QR error = ${error}`);
        let phrase = lastWasError ? " . " : "<br> . ";
        logs.innerHTML += phrase;
        lastWasError = true;
    }

    let html5QrcodeScanner = new Html5QrcodeScanner(
        "reader", { fps: 10, qrbox: 250 }, /* verbose= */ true);
    html5QrcodeScanner.render(onScanSuccess, onScanFailure);


</script>

</body>
</html>
